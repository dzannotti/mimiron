#!/usr/bin/env bash

# Toggle between two audio output devices

# Get only sink lines (not streams)
SINKS=$(wpctl status | awk "/Sinks:/,/Sources:/" | grep -E "^\s*\*?\s*[0-9]+\." | grep -v "output_")

# Get device IDs
DEVICE_1_ID=$(echo "$SINKS" | grep "A50" | sed -E "s/^[^0-9]*([0-9]+).*/\1/")
DEVICE_2_ID=$(echo "$SINKS" | grep "Family 17h" | sed -E "s/^[^0-9]*([0-9]+).*/\1/")

# Get current default (has asterisk)
CURRENT_ID=$(echo "$SINKS" | grep "\*" | sed -E "s/^[^0-9]*([0-9]+).*/\1/")

# Toggle
if [ "$CURRENT_ID" = "$DEVICE_1_ID" ]; then
    wpctl set-default "$DEVICE_2_ID"
else
    wpctl set-default "$DEVICE_1_ID"
fi
